<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <title>Kualitas Udara Kota Sidoarjo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
	
    <style>
	
	@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
			  
			  body {
			font-family: 'Poppins', sans-serif;
			margin: 0;
			padding: 0;
			background: #eef2f3;
			color: #333;
		}

		.container {
			width: 85%;
			max-width: 1200px;
			margin: 40px auto;
			background: white;
			padding: 30px;
			border-radius: 12px;
			box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1);
		}

		.header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: linear-gradient(to right, #ff9966, #ff5e62);
			padding: 18px;
			border-radius: 12px;
			color: white;
		}

		.status {
			background: rgba(255, 255, 255, 0.2);
			padding: 12px;
			border-radius: 12px;
			text-align: right;
		}

		.forecast {
			margin-top: 20px;
		}

		.forecast-table {
			width: 100%;
			border-collapse: collapse;
			border-radius: 12px;
			overflow: hidden;
		}

		.forecast-table th, .forecast-table td {
			border: 1px solid #ddd;
			padding: 12px;
			text-align: center;
		}

		.forecast-table th {
			background: #f8f9fa;
			font-weight: 600;
		}

		.forecast-table tr:hover {
			background: #f1f1f1;
			transition: 0.3s;
		}

		.good { background: #a3e4a3; }
		.moderate { background: #f9e79f; }
		.unhealthy { background: #ff5e62; color: white; }

		.map-container {
			margin-top: 20px;
			width: 100%;
			height: 400px;
		}

		#map {
			width: 100%;
			height: 400px;
			border-radius: 12px;
			box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
		}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Kualitas Udara di Kota Tegal</h2>
            <div class="status">
                <h3>61 AQI üòê</h3>
                <p>Relatif cukup sehat</p>
                <p>Polutan utama: PM2.5 (43 ¬µg/m¬≥)</p>
            </div>
        </div>
        <div class="forecast">
            <h3>Prakiraan per Jam</h3>
            <table class="forecast-table">
                <tr>
                    <th>Waktu</th>
                    <th>AQI</th>
                    <th>Suhu</th>
                    <th>Kecepatan Angin</th>
                    <th>Kelembaban</th>
                </tr>
                <tr class="unhealthy">
                    <td>12:00</td>
                    <td>62</td>
                    <td>29¬∞C</td>
                    <td>9.3 km/h</td>
                    <td>89%</td>
                </tr>
                <tr class="moderate">
                    <td>16:00</td>
                    <td>61</td>
                    <td>28¬∞C</td>
                    <td>7.2 km/h</td>
                    <td>88%</td>
                </tr>
                <tr class="good">
                    <td>23:00</td>
                    <td>61</td>
                    <td>29¬∞C</td>
                    <td>3.6 km/h</td>
                    <td>94%</td>
                </tr>
            </table>
        </div>
        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>
    
<script>
    var map = L.map('map').setView([-6.9055, 109.1852], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    function updateCircle() {
        let aqi = Math.floor(Math.random() * 150) + 50; // Simulasi AQI antara 50 - 200
        let color = "#FFFF00"; // Warna selalu kuning
        let emoji = aqi <= 50 ? 'üòä' : aqi <= 100 ? 'üòê' : aqi <= 150 ? 'üò∑' : 'üö®';

        // Hapus lingkaran lama jika ada
        if (window.aqiCircle) {
            map.removeLayer(window.aqiCircle);
        }

        // Tambahkan lingkaran baru
        window.aqiCircle = L.circle([-6.9055, 109.1852], {
            color: color,
            fillColor: color,
            fillOpacity: 0.5,
            radius: aqi * 10 // Radius berdasarkan AQI
        }).addTo(map);

        // Perbarui popup pada marker dengan AQI terbaru
        window.aqiMarker.setPopupContent(`Pangkah, Tegal<br>AQI: ${aqi} ${emoji}`).openPopup();
    }

    // Tambahkan marker untuk Pangkah, Tegal
    window.aqiMarker = L.marker([-6.9055, 109.1852])
        .addTo(map)
        .bindPopup('Pangkah, Tegal<br>AQI: --')
        .openPopup();

    updateCircle(); // Panggil pertama kali
    setInterval(updateCircle, 1000); // Perbarui setiap 1 detik
</script>



</body>
</html>
